{"version":3,"sources":["userModel.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"models.js","sourcesContent":["myApp.factory('userModel', ['$http', '$cookies', function($http, $cookies) {\r\n    var userModel = {};\r\n\r\n    /**\r\n     * Check if the credentials are correct from server\r\n     * and return the promise back to the controller\r\n     * \r\n     * @param  {array} loginData\r\n     * @return {promise}\r\n     */\r\n    userModel.doLogin = function(loginData) {\r\n        console.log(loginData);\r\n        return $http({\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            url: baseUrl + 'auth',\r\n            method: \"POST\",\r\n            data: {\r\n                email: loginData.email,\r\n                password: loginData.password\r\n            }\r\n        }).success(function(response) {\r\n            console.log(response);\r\n            $cookies.put('auth', JSON.stringify(response));\r\n        }).error(function(data, status, headers) {\r\n            console.log(data, status, headers);\r\n            alert(data);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Return whether the user is logged in or not\r\n     * based on the cookie set during the login\r\n     * \r\n     * @return {boolean}\r\n     */\r\n    userModel.getAuthStatus = function() {\r\n        var status = $cookies.get('auth');\r\n        if (status) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Get the user object converted from string to JSON\r\n     * @return {user object}\r\n     */\r\n    userModel.getUserObject = function() {\r\n        var userObj = angular.fromJson($cookies.get('auth'));\r\n        return userObj;\r\n    }\r\n\r\n    /**\r\n     * Close the session of the current user\r\n     * and delete the cookie set for him\r\n     *\r\n     * @return boolean\r\n     */\r\n    userModel.doUserLogout = function() {\r\n        $cookies.remove('auth');\r\n    };\r\n\r\n    return userModel;\r\n}])\r\n"]}